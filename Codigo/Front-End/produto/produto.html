<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produtos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"
        defer></script>
    <link rel="stylesheet" href="../style.css">
    <link rel="js" href="../script.js">
</head>

<body class="bg-light">
    <!--
        HEADER
    -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow py-2 px-2">
        <div class="container-fluid">
            <a class="navbar-brand" href="../pesquisa/pesquisa.html">ConnectArt</a>
            
        </div>
    </nav>
    <!--
        FIM DO HEADER
    -->
    <!-- CONTAINER PRINCIPAL -->
    <div class="container my-4">
        <div class="row justify-content-center">

            <div class="col-lg-8">

                <!-- DIV DA IMAGEM PRODUTO E NOME PRODUTO/AVALIACAO/DADOS DO ARTISTA-->

                <div class="row">
                    <div class="col-sm-6">
                        <a href="#">
                            <img src="https://via.placeholder.com/500x500" class="img-fluid rounded shadow w-100 "
                                alt="Imagem 1">
                        </a>
                    </div>
                    <div class="col-sm-6">
                        <div class="mb-3">
                            
                            <label class="h5">Informações do Produto</label>

                            <form id="textForm" onsubmit="event.preventDefault()" enctype="multipart/form-data">
                                <div class="form-row mb-3">
                                    <div class="col-auto">
                                        <label for="inserirnomeproduto" class="col-form-label">Nome:</label>
                                    </div>
                                    <div class="col-auto">
                                        <input type="text" class="form-control" id="inserirnomeproduto" placeholder="Nome produto">
                                    </div>
                                </div>
            
                                <div class="form-row mb-3">
                                    <div class="col-auto">
                                        <label for="colocarpreco" class="col-form-label">Preço:</label>
                                    </div>
                                    <div class="col-auto">
                                        <input type="text" id="colocarpreco" class="form-control" placeholder="99,99">
                                    </div>
                                </div>
            
                                <div class="form-group mb-3">
                                    <label for="descricaoproduto">Texto:</label>
                                    <textarea class="form-control" id="descricaoproduto" name="userText" rows="4"></textarea>
                                </div>
            
                                <div class="form-row mb-3">
                                    <div class="col-auto">
                                        <label for="colocaremail" class="col-form-label">Email do artista:</label>
                                    </div>
                                    <div class="col-auto">
                                        <input type="email" id="colocaremail" class="form-control" placeholder="nome@exemplo.com">
                                    </div>
                                </div>
                                <div class="form-row mb-3">
                                    <div class="col-auto">
                                        <label for="uploadimagem" class="col-form-label">Imagem:</label>
                                    </div>
                                    <div class="col-auto">
                                        <input type="file" class="form-control-file" id="uploadimagem" name="uploadimagem">
                                    </div>
                                </div>
            
                                <button type="submit" class="btn btn-primary">Enviar</button>
                            </form>
                        </div>
                        
                        
                    </div>

                </div>
                <!-- FIM DIV DA IMAGEM PRODUTO E NOME PRODUTO/AVALIACAO/DADOS DO ARTISTA-->

                
                    <!--- 
                    <h1>Planos</h1>
                    <div class="card-planos ">
                        <div class="row">

                            <div class="col-md-4 ">
                                <div class="card m-auto" style="width: 12rem;">
                                    <img src="..." class="card-img-top" alt="...">
                                    <div class="card-body">
                                        <h5 class="card-title"><input class="form-control"
                                                placeholder="Plano 1"></input></h5>
                                        <h6 class="card-subtitle mb-2 text-body-secondary"><input class="form-control"
                                                placeholder="R$ 99,99"></input></h6>
                                        <div class="mb-1">
                                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                                placeholder="Detalhes do produto"></textarea>
                                        </div>
                                        <a href="#" class="btn btn-primary">Comprar</a>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-4">
                                <div class="card m-auto " style="width: 12rem;">
                                    <img src="..." class="card-img-top" alt="...">
                                    <div class="card-body">
                                        <h5 class="card-title"><input class="form-control"
                                                placeholder="Plano 2"></input></h5>
                                        <h6 class="card-subtitle mb-2 text-body-secondary"><input class="form-control"
                                                placeholder="R$ 99,99">
                                        </h6>
                                        <div class="mb-1">
                                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                                placeholder="Detalhes do produto"></textarea>
                                        </div>
                                        <a href="#" class="btn btn-primary">Comprar</a>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="card m-auto" style="width: 12rem;">
                                    <img src="..." class="card-img-top" alt="...">
                                    <div class="card-body">
                                        <h5 class="card-title"><input class="form-control"
                                                placeholder="Plano 3"></input></h5>
                                        <h6 class="card-subtitle mb-2 text-body-secondary"><input class="form-control"
                                                placeholder="R$ 99,99">
                                        </h6>
                                        <div class="mb-1">
                                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                                placeholder="Detalhes do produto"></textarea>
                                        </div>
                                        <a href="#" class="btn btn-primary">Comprar</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            -->
                <!-- FIM DIV DETALHES PRODUTO E PLANOS-->


            </div>

        </div>
    </div>
    </div>
    <!-- FIM CONTAINER PRINCIPAL -->

   
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        
    document.getElementById('textForm').addEventListener('submit', function(event) {
    event.preventDefault();
    geraproduto();
});

function geraproduto() {
    const formData = new FormData();
    formData.append('produtoNome', document.getElementById('inserirnomeproduto').value);
    formData.append('produtoPreco', document.getElementById('colocarpreco').value);
    formData.append('produtoDescricao', document.getElementById('descricaoproduto').value);
    formData.append('artistaEmail', document.getElementById('colocaremail').value);
    formData.append('imagePath/', document.getElementById('uploadimagem').files[0]);

    fetch('http://localhost:4567/produto', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro na resposta do servidor');
        }
        return response.json();
    })
    .then(data => {
        console.log('Success:', data);
        if (data.produtoId) {
            alert(`Produto cadastrado com sucesso! Grave o ID do seu produto!!! ---> ${data.produtoId}`);
        } else {
            alert('Ocorreu um erro ao cadastrar produto');
        }
    })
    .catch((error) => {
        console.error('Error:', error);
        alert('Erro ao cadastrar produto');
    });
}
    </script>
</body>

</html>